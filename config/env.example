# SoftwareOne Marketplace MCP Server Configuration

# ===== IMPORTANT: .env FILE IS OPTIONAL! =====
#
# When using with IDEs (Claude Desktop, Cursor):
#   - SSE mode: Clients provide credentials via HTTP headers (no .env needed)
#   - stdio mode: IDE provides credentials via env vars (no .env needed)
#
# This .env file is only used for:
#   - Manual/direct execution: `docker compose run stdio`
#   - Development/testing without IDE
#   - Fallback values when env vars not provided
#
# Most users can skip this file entirely!

# ===== STDIO MODE FALLBACK (optional) =====
# Only used if running stdio manually without IDE providing env vars

# Base URL for the marketplace API
MARKETPLACE_API_BASE_URL=https://api.platform.softwareone.com

# Your authentication token (with or without Bearer prefix)
# Format: idt:TKN-XXXX-XXXX:token_value
MARKETPLACE_API_TOKEN=idt:TKN-2125-2070:your_token_here

# ===== SHARED CONFIGURATION (both stdio and SSE) =====

# OpenAPI specification URL for endpoint discovery (public, no auth required)
OPENAPI_SPEC_URL=https://api.platform.softwareone.com/public/v1/openapi.json

# Debug mode (true/false)
DEBUG=false

# Request timeout in seconds
REQUEST_TIMEOUT=30

# ===== SSE MODE CONFIGURATION (for cloud deployment - Cursor IDE) =====
# SSE is always multi-tenant - clients provide credentials via X-MPT-Authorization header
# No MARKETPLACE_API_TOKEN needed for SSE services!

# Enable SSE transport (set to true for cloud/remote access)
SSE_ENABLED=false

# Server host (0.0.0.0 for all interfaces, 127.0.0.1 for localhost only)
SSE_HOST=0.0.0.0

# Server port
SSE_PORT=8000

# CORS origins (comma-separated, use * for all origins)
# For production, specify allowed origins: https://your-app.com,https://cursor.sh
SSE_CORS_ORIGINS=*

# Default API endpoint when client doesn't specify X-MPT-Endpoint header
SSE_DEFAULT_BASE_URL=https://api.platform.softwareone.com

# ===== GITBOOK DOCUMENTATION INTEGRATION (Optional) =====
# Enable AI agents to access official documentation as MCP resources
# Leave empty to disable documentation cache

# GitBook API key for authentication (get from: https://app.gitbook.com/account/tokens)
GITBOOK_API_KEY=

# GitBook Space ID (find in URL: app.gitbook.com/o/{org}/s/{space_id})
GITBOOK_SPACE_ID=

# GitBook API base URL (usually no need to change)
GITBOOK_API_BASE_URL=https://api.gitbook.com/v1

# Cache refresh interval in hours (default: 24 hours)
GITBOOK_CACHE_REFRESH_HOURS=24

# Max concurrent GitBook API requests (default: 2; lower values reduce 429 rate-limit errors)
GITBOOK_MAX_CONCURRENT_REQUESTS=2

# Public URL where documentation is published (optional, enables browser links in MCP responses)
# Example: https://docs.platform.softwareone.com
# Leave empty if you don't want to expose browser URLs
GITBOOK_PUBLIC_URL=

# ===== ANALYTICS DATABASE (Optional) =====
# Enable usage tracking and statistics collection
# Leave empty to disable analytics

# PostgreSQL connection string for analytics database
# Format: postgresql+asyncpg://user:password@host:port/database
# Example (local): postgresql+asyncpg://postgres:password@localhost:5432/mcp_analytics
# Example (Google Cloud SQL): postgresql+asyncpg://user:pass@/dbname?host=/cloudsql/project:region:instance
ANALYTICS_DATABASE_URL=
